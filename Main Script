// VARIABLES ---------------------------------------------------------------------------------------------------------------

var id = getColumn("Pollution Table", "id");

// ELEMENTS --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

var carbonMonoxide = getColumn("Pollution Table", "CO(GT)");
var benzene = getColumn("Pollution Table", "C6H6(GT)");
var titaniumDioxide = getColumn("Pollution Table", "PT08.S2(NMHC)");

// FIXED ELEMENTS --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

// These lists include all of the data from 2004-2005 but have removed the "undefined" data that appears on page 19
var fixedCarbonMonoxide = [];
var fixedBenzene = [];
var fixedTitaniumDioxide = [];

// FUNCTIONS -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

// Filters the lists to remove the "undefined" data that code.org adds to the dataset
function filterRelavance(stopNumber){

  for (var i = 0; i < id[stopNumber]; i += 1){
    
    appendItem(fixedCarbonMonoxide, carbonMonoxide[i]);
    appendItem(fixedBenzene, benzene[i]);
    appendItem(fixedTitaniumDioxide, titaniumDioxide[i]);
  }
}

// Because traversing through around 10,000 elements can take some time, there is a loading screen
function startGameNow(){
  
  playSound("sound://category_bell/vibrant_game_slot_machine_ding_1.mp3");
  setText("loadingText", "Get Ready!");
  
  setTimeout(function(){
    setProperty("mainTitle", "background-color", "white");
  }, 2000);
}

// MAIN SETUP ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

// Runs the filterRelavance function
filterRelavance(9356);

// Starts the game!
startGameNow();

// WORKS CITED ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

var documentation = "https://github.com/Larrieeee/Hackathon-COCO-M";
console.log("Documentation: " + documentation);
